### **标签文件模式**

查看文件模式

```bash
from PIL import Image
Image.MAX_IMAGE_PIXELS = None

img = Image.open(r"E:\tree\z1_labels_palette.tif")
print(img.mode)
```
img.mode 是 'RGB' 就是RGB图；

img.mode 是 'P' 就是调色板图；

img.mode 是 'L' 是灰度图。

1. RGB模式的TIFF文件

    每个像素用3个（或更多）通道直接存储颜色值，通常是红、绿、蓝3个通道，每个通道8位（0-255）。

    像素数据就是直接的颜色，比如 (255, 0, 0) 就表示纯红色。

    适合普通彩色照片或多通道图像。

    读取时，每个像素是一个RGB三元组，文件体积通常较大。

2. P模式（调色板模式，Palette mode）的TIFF文件

    其实图像像素是单通道8位灰度值，但这些灰度值不是直接颜色，而是调色板索引。

    图像文件内部包含一个调色板（palette），调色板是一个颜色列表，索引值对应调色板中的某个颜色。

    每个像素值指向调色板里的颜色编号，比如像素值 5 代表调色板中第6个颜色。

    这样能大幅减小文件大小，适合颜色数有限的图像（如标签、分割图、漫画图等）。

    读取时，需要用调色板映射索引值到颜色。
    

	**用调色板图（P模式）做语义分割标签时
    标签图像的像素值是类别索引（索引到调色板颜色）；
    通常用 .convert('L') 转成灰度图，得到类别ID灰度标签。**